x-compat-i386-opts: &compat_i386_opts
  prepend-pkg-config-path: /app/lib32/pkgconfig:/usr/lib/i386-linux-gnu/pkgconfig
  ldflags: -L/app/lib32
  prepend-path: /usr/lib/sdk/toolchain-i386/bin
  env:
    CC: i686-unknown-linux-gnu-gcc
    CXX: i686-unknown-linux-gnu-g++
  libdir: /app/lib32

name: modules-32bit
buildsystem: simple
build-commands: []
modules:
  - name: ISPC-32bit
    buildsystem: cmake
    build-options:
      arch:
        x86_64: *compat_i386_opts
    config-opts:
      - -DCMAKE_BUILD_TYPE:STRING=Release
      - -DISPC_INCLUDE_EXAMPLES:BOOL=OFF
      - -DISPC_NO_DUMPS:BOOL=ON
      - -DCMAKE_INSTALL_PREFIX=/app
      - -DARM_ENABLED:BOOL=OFF
    sources:
      - type: git
        url: https://github.com/ispc/ispc
        tag: v1.15.0
      - type: patch
        path: ispc-libclang-cpp.patch
  #- name: glibc-32bit
    #buildsystem: autotools
    #builddir: true
    #build-options:
      #arch:
        #x86_64: *compat_i386_opts
      #cflags: -fpermissive -Wno-error=attributes
      #cxxflags: -fpermissive -Wno-error=attributes
    #sources:
      #- type: archive
        #url: http://ftp.gnu.org/pub/gnu/glibc/glibc-2.33.tar.xz
        #sha256: 2e2556000e105dbd57f0b6b2a32ff2cf173bde4f0d85dffccfd8b7e51a0677ff
